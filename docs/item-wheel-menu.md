# 物品轮盘菜单使用指南

## 功能简介

物品轮盘菜单是一个快速访问物品栏的径向菜单，可以让你快速使用或装备物品栏中的物品（快捷键 3-8 对应的物品）。

## 使用方法

### 打开菜单
按 **`~` 键**（波浪号键，通常在键盘左上角 Esc 键下方）

### 选择物品
- 移动鼠标指向你想要使用的物品
- 鼠标移出中心小圆点后，会高亮显示当前指向的物品扇区
- 扇区会放大并变亮，表示已选中

### 使用物品
- **左键点击**：使用或装备选中的物品
- **右键点击**：取消并关闭菜单
- **ESC 键**：取消并关闭菜单

## 界面说明

```
       [4]
    [3]   [5]
       ●
    [8]   [6]
       [7]
```

- 中心的 **●** 是死区，鼠标在这里不会选中任何物品
- 数字 3-8 对应物品栏的快捷键位置
- 每个扇区显示物品名称（如果该位置有物品）
- 空位置会显示对应的快捷键编号 `[3]` `[4]` 等

## 功能特性

✅ **实时同步**：显示当前物品栏中实际绑定的物品  
✅ **视觉反馈**：悬停时扇区放大、高亮，清晰指示当前选择  
✅ **智能关闭**：打开背包、地图等界面时自动关闭  
✅ **快速操作**：无需离开游戏视角，快速切换物品  

## 注意事项

1. **物品类型限制**：只能选择可使用/装备的物品
   - 消耗品（药品、食物等）
   - 技能物品
   - 可手持的物品
   - 武器不会出现在轮盘中（武器有专门的切换按键）

2. **死区设计**：中心有一个小死区（30 像素半径）
   - 鼠标在死区内不会选中任何物品
   - 可以安全地移动鼠标而不误触

3. **与其他界面的交互**：
   - 如果有其他 UI 窗口打开（背包、地图、暂停菜单等），轮盘菜单无法打开
   - 打开轮盘菜单时，游戏输入会被暂时屏蔽（防止误触发移动、射击等）

## 技术参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| 外半径 | 150px | 轮盘的外圆半径 |
| 内半径 | 50px | 轮盘的内圆半径 |
| 死区半径 | 30px | 中心不响应鼠标的区域 |
| 悬停缩放 | 1.1x | 鼠标悬停时扇区放大倍数 |

## 自定义

如果你想修改轮盘菜单的外观或行为，可以编辑以下文件：

- `Features/ItemWheelMenu.cs` - 主要 UI 组件和逻辑
- `Patches/ItemWheelMenuPatch.cs` - 输入监听和游戏集成

修改以下常量可以调整轮盘尺寸：
```csharp
private const int ITEM_COUNT = 6;           // 物品数量（3-8 = 6个）
private const float WHEEL_RADIUS = 150f;    // 外半径
private const float INNER_RADIUS = 50f;     // 内半径
private const float DEAD_ZONE = 30f;        // 死区半径
```

修改颜色：
```csharp
private readonly Color _normalColor = new Color(0.2f, 0.2f, 0.2f, 0.8f);    // 正常状态
private readonly Color _hoverColor = new Color(0.4f, 0.4f, 0.5f, 0.9f);     // 悬停状态
private readonly Color _selectedColor = new Color(0.3f, 0.5f, 0.7f, 0.9f);  // 选中状态
```

## 故障排除

### 轮盘菜单打不开？
1. 检查是否有其他 UI 界面已经打开
2. 确认游戏没有暂停
3. 查看日志文件：`scripts/rlog.sh`

### 物品不显示？
1. 确认物品栏对应位置确实有物品绑定
2. 确认物品类型是可使用/装备的（武器除外）
3. 物品必须在主背包中

### 点击没反应？
1. 确保鼠标移出了中心死区
2. 确认扇区已经高亮显示（表示已选中）
3. 使用左键点击（不是右键）

---

## 反馈和建议

如果你在使用过程中遇到问题，或有改进建议，可以：
1. 查看模组日志了解详细错误信息
2. 在项目 GitHub 页面提交 Issue
3. 提供复现步骤和日志文件以便排查

祝游戏愉快！ 🎮

